/* Material Form Field Dark Theme Support */
::ng-deep .mat-mdc-form-field {
    color: var(--text-primary);
}

/* Direct component styles (ViewEncapsulation.None) */
.mat-mdc-form-field {
    color: var(--text-primary);
}

[data-theme="dark"] .mat-mdc-form-field {
    color: #ffffff;
}

[data-theme="dark"] .mat-mdc-text-field-wrapper {
    background-color: #374151 !important;
}

[data-theme="dark"] .mat-mdc-text-field-wrapper .mdc-text-field {
    background-color: #374151 !important;
}

[data-theme="dark"] .mat-mdc-text-field-wrapper .mdc-text-field--filled {
    background-color: #374151 !important;
}

/* Force dark background on all nested elements */
[data-theme="dark"] app-month-year-picker .mat-mdc-form-field .mat-mdc-text-field-wrapper {
    background-color: #374151 !important;
}

[data-theme="dark"] app-month-year-picker .mat-mdc-form-field .mat-mdc-text-field-wrapper .mdc-text-field {
    background-color: #374151 !important;
}

[data-theme="dark"] app-month-year-picker .mat-mdc-form-field .mat-mdc-text-field-wrapper .mdc-text-field--filled {
    background-color: #374151 !important;
}

[data-theme="dark"] app-month-year-picker .mat-mdc-form-field .mat-mdc-text-field-wrapper .mdc-text-field__ripple {
    background-color: #374151 !important;
}

[data-theme="dark"] app-month-year-picker .mat-mdc-form-field .mat-mdc-text-field-wrapper .mdc-line-ripple {
    background-color: transparent !important;
}

::ng-deep .mat-mdc-text-field-wrapper {
    background-color: var(--bg-tertiary) !important;
    border-radius: 4px;
}

::ng-deep .mat-mdc-text-field-wrapper .mdc-text-field {
    background-color: var(--bg-tertiary) !important;
}

::ng-deep .mat-mdc-text-field-wrapper .mdc-text-field--filled {
    background-color: var(--bg-tertiary) !important;
}

::ng-deep .mat-mdc-text-field-wrapper .mdc-text-field__input {
    color: var(--text-primary) !important;
    background-color: transparent !important;
}

::ng-deep .mat-mdc-text-field-wrapper .mdc-text-field__input::placeholder {
    color: var(--text-tertiary) !important;
}

/* Input Control */
::ng-deep .mat-mdc-form-field-input-control {
    background-color: transparent !important;
}

::ng-deep .mat-mdc-form-field-input-control input {
    color: var(--text-primary) !important;
    background-color: transparent !important;
}

::ng-deep .mat-mdc-form-field-input-control input::placeholder {
    color: var(--text-tertiary) !important;
}

::ng-deep .mat-mdc-form-field-input-control .mdc-text-field__input {
    color: var(--text-primary) !important;
    background-color: transparent !important;
}

/* Form Field Label */
::ng-deep .mat-mdc-form-field-label {
    color: var(--text-secondary) !important;
}

::ng-deep .mat-mdc-form-field-label .mdc-floating-label {
    color: var(--text-secondary) !important;
}

::ng-deep .mat-mdc-form-field-label.mdc-floating-label--float-above {
    color: var(--text-secondary) !important;
}

::ng-deep .mat-mdc-form-field.mat-focused .mat-mdc-form-field-label,
::ng-deep .mat-mdc-form-field.mat-focused .mat-mdc-form-field-label .mdc-floating-label {
    color: var(--text-secondary) !important;
}

/* Datepicker Toggle Icon */
::ng-deep .mat-datepicker-toggle {
    color: var(--text-primary) !important;
}

::ng-deep .mat-datepicker-toggle .mat-icon-button {
    color: var(--text-primary) !important;
}

::ng-deep .mat-datepicker-toggle-default-icon {
    color: var(--text-primary) !important;
}

/* Dark Mode - Datepicker Label and Icon */
[data-theme="dark"] ::ng-deep .mat-mdc-form-field-label,
[data-theme="dark"] ::ng-deep .mat-mdc-form-field-label .mdc-floating-label,
[data-theme="dark"] ::ng-deep .mat-mdc-form-field-label .mdc-floating-label--float-above {
    color: #ffffff !important;
}

[data-theme="dark"] ::ng-deep .mat-mdc-form-field.mat-focused .mat-mdc-form-field-label,
[data-theme="dark"] ::ng-deep .mat-mdc-form-field.mat-focused .mat-mdc-form-field-label .mdc-floating-label {
    color: #ffffff !important;
}

[data-theme="dark"] ::ng-deep .mat-datepicker-toggle,
[data-theme="dark"] ::ng-deep .mat-datepicker-toggle .mat-icon-button,
[data-theme="dark"] ::ng-deep .mat-datepicker-toggle .mat-icon-button .mat-icon,
[data-theme="dark"] ::ng-deep .mat-datepicker-toggle-default-icon {
    color: #ffffff !important;
}

[data-theme="dark"] ::ng-deep .mat-datepicker-toggle .mat-icon-button svg,
[data-theme="dark"] ::ng-deep .mat-datepicker-toggle .mat-icon-button svg path {
    fill: #ffffff !important;
    color: #ffffff !important;
}

/* Dark Mode - Input Text */
[data-theme="dark"] ::ng-deep .mat-mdc-text-field-wrapper .mdc-text-field__input {
    color: #ffffff !important;
}

[data-theme="dark"] ::ng-deep .mat-mdc-form-field-input-control input {
    color: #ffffff !important;
}

[data-theme="dark"] ::ng-deep .mat-mdc-form-field-input-control .mdc-text-field__input {
    color: #ffffff !important;
}

/* Dark Mode - Input Placeholder */
[data-theme="dark"] ::ng-deep .mat-mdc-text-field-wrapper .mdc-text-field__input::placeholder {
    color: rgba(255, 255, 255, 0.6) !important;
}

[data-theme="dark"] ::ng-deep .mat-mdc-form-field-input-control input::placeholder {
    color: rgba(255, 255, 255, 0.6) !important;
}

/* Dark Mode - MDC Icon Button (Datepicker Toggle) */
[data-theme="dark"] ::ng-deep .mat-mdc-icon-button {
    color: #ffffff !important;
}

[data-theme="dark"] ::ng-deep .mat-mdc-icon-button .mat-icon {
    color: #ffffff !important;
}

[data-theme="dark"] ::ng-deep .mat-mdc-icon-button svg,
[data-theme="dark"] ::ng-deep .mat-mdc-icon-button svg path {
    fill: #ffffff !important;
}

/* Dark Mode - Form Field Wrapper Background */
[data-theme="dark"] ::ng-deep .mat-mdc-form-field {
    background-color: #374151 !important;
}

[data-theme="dark"] ::ng-deep .mat-mdc-text-field-wrapper {
    background-color: #374151 !important;
}

[data-theme="dark"] ::ng-deep .mat-mdc-text-field-wrapper .mdc-text-field {
    background-color: #374151 !important;
}

[data-theme="dark"] ::ng-deep .mat-mdc-text-field-wrapper .mdc-text-field--filled {
    background-color: #374151 !important;
}

[data-theme="dark"] ::ng-deep .mat-mdc-text-field-wrapper .mdc-text-field__ripple {
    background-color: #374151 !important;
}

[data-theme="dark"] ::ng-deep .mat-mdc-form-field.mat-focused .mat-mdc-text-field-wrapper {
    background-color: #374151 !important;
}

[data-theme="dark"] ::ng-deep .mat-mdc-form-field.mat-focused .mat-mdc-text-field-wrapper .mdc-text-field {
    background-color: #374151 !important;
}

[data-theme="dark"] ::ng-deep .mat-mdc-form-field.mat-focused .mat-mdc-text-field-wrapper .mdc-text-field--filled {
    background-color: #374151 !important;
}

/* Dark Mode - Additional MDC Background Overrides */
[data-theme="dark"] ::ng-deep .mdc-text-field {
    background-color: #374151 !important;
}

[data-theme="dark"] ::ng-deep .mdc-text-field--filled {
    background-color: #374151 !important;
}

[data-theme="dark"] ::ng-deep .mdc-text-field__input {
    background-color: transparent !important;
}

[data-theme="dark"] ::ng-deep .mat-mdc-form-field-subscript-wrapper {
    background-color: transparent !important;
}

/* Dark Mode - Additional wrapper elements */
[data-theme="dark"] ::ng-deep .mat-mdc-form-field .mat-mdc-text-field-wrapper {
    background-color: #374151 !important;
}

[data-theme="dark"] ::ng-deep .mat-mdc-form-field .mat-mdc-text-field-wrapper .mdc-text-field {
    background-color: #374151 !important;
}

[data-theme="dark"] ::ng-deep .mat-mdc-form-field .mat-mdc-text-field-wrapper .mdc-text-field__input {
    background-color: transparent !important;
}

[data-theme="dark"] ::ng-deep .mat-mdc-form-field input {
    background-color: transparent !important;
}

/* Datepicker Panel (Calendar Popup) */
::ng-deep .mat-datepicker-content {
    background-color: var(--bg-primary) !important;
    color: var(--text-primary) !important;
    border: 1px solid var(--border-color) !important;
}

::ng-deep .mat-datepicker-popup {
    background-color: var(--bg-primary);
}

::ng-deep .mat-calendar {
    background-color: var(--bg-primary) !important;
    color: var(--text-primary) !important;
}

::ng-deep .mat-calendar-content {
    background-color: var(--bg-primary);
}

::ng-deep .mat-calendar-table {
    background-color: var(--bg-primary) !important;
}

/* Calendar Header */
::ng-deep .mat-calendar-header {
    background-color: var(--bg-primary) !important;
    color: var(--text-primary) !important;
}

::ng-deep .mat-calendar-period-button {
    color: var(--text-primary) !important;
}

::ng-deep .mat-calendar-arrow {
    border-top-color: var(--text-primary) !important;
}

::ng-deep .mat-calendar-previous-button,
::ng-deep .mat-calendar-next-button {
    color: var(--text-primary) !important;
}

/* Calendar Table */
::ng-deep .mat-calendar-table-header th {
    color: var(--text-secondary) !important;
    border-color: var(--border-color) !important;
}

::ng-deep .mat-calendar-table-header-divider {
    border-color: var(--border-color) !important;
}

::ng-deep .mat-calendar-body-cell {
    color: var(--text-primary) !important;
}

/* Calendar Body Cells */
::ng-deep .mat-calendar-body-cell-content {
    color: var(--text-primary) !important;
}

::ng-deep .mat-calendar-body-today:not(.mat-calendar-body-selected) {
    border-color: var(--color-primary) !important;
}

::ng-deep .mat-calendar-body-selected {
    background-color: var(--color-primary) !important;
    color: white !important;
}

::ng-deep .mat-calendar-body-cell:not(.mat-calendar-body-disabled):hover > .mat-calendar-body-cell-content:not(.mat-calendar-body-selected) {
    background-color: var(--bg-hover) !important;
}

/* Month Picker Specific Styles */
::ng-deep .month-picker .mat-calendar-body-cell-content {
    color: var(--text-primary) !important;
}

::ng-deep .month-picker .mat-calendar-body-selected {
    background-color: var(--color-primary) !important;
    color: white !important;
}

::ng-deep .month-picker .mat-calendar-body-cell:hover > .mat-calendar-body-cell-content:not(.mat-calendar-body-selected) {
    background-color: var(--bg-hover) !important;
}

/* Form Field Focus Overlay */
::ng-deep .mat-mdc-form-field-focus-overlay {
    background-color: transparent !important;
}

::ng-deep .mat-mdc-form-field-subscript-wrapper {
    color: var(--text-tertiary);
}

/* Focused State */
::ng-deep .mat-mdc-form-field.mat-focused .mat-mdc-text-field-wrapper {
    background-color: var(--bg-tertiary) !important;
}

::ng-deep .mat-mdc-form-field.mat-focused .mat-mdc-text-field-wrapper .mdc-text-field {
    background-color: var(--bg-tertiary) !important;
}

/* Disabled State */
::ng-deep .mat-mdc-form-field.mat-form-field-disabled .mat-mdc-text-field-wrapper {
    background-color: var(--bg-tertiary) !important;
    opacity: 0.6;
}

::ng-deep .mat-mdc-form-field.mat-form-field-disabled .mat-mdc-text-field-wrapper .mdc-text-field {
    background-color: var(--bg-tertiary) !important;
}

::ng-deep .mat-mdc-form-field.mat-form-field-disabled input {
    color: var(--text-disabled) !important;
}

/* Disabled Dates */
::ng-deep .mat-calendar-body-disabled > .mat-calendar-body-cell-content:not(.mat-calendar-body-selected) {
    color: var(--text-disabled) !important;
}

/* Year View (Multi-year picker) */
::ng-deep .mat-calendar-body-cell-content.mat-calendar-body-label {
    color: var(--text-secondary) !important;
}

::ng-deep .mat-calendar-body-disabled .mat-calendar-body-cell-content {
    color: var(--text-disabled) !important;
    opacity: 0.5;
}

/* Dark Mode - Calendar Popup Additional Styles */
[data-theme="dark"] ::ng-deep .mat-datepicker-content {
    background-color: #1f2937 !important;
    color: #ffffff !important;
    border: 1px solid #374151 !important;
}

[data-theme="dark"] ::ng-deep .mat-calendar {
    background-color: #1f2937 !important;
    color: #ffffff !important;
}

[data-theme="dark"] ::ng-deep .mat-calendar-header {
    background-color: #1f2937 !important;
    color: #ffffff !important;
}

[data-theme="dark"] ::ng-deep .mat-calendar-period-button {
    color: #ffffff !important;
}

[data-theme="dark"] ::ng-deep .mat-calendar-arrow {
    border-top-color: #ffffff !important;
}

[data-theme="dark"] ::ng-deep .mat-calendar-previous-button,
[data-theme="dark"] ::ng-deep .mat-calendar-next-button {
    color: #ffffff !important;
}

[data-theme="dark"] ::ng-deep .mat-calendar-body-cell-content {
    color: #ffffff !important;
}

[data-theme="dark"] ::ng-deep .mat-calendar-table-header th {
    color: rgba(255, 255, 255, 0.7) !important;
    border-color: #374151 !important;
}

[data-theme="dark"] ::ng-deep .month-picker .mat-calendar-body-cell-content {
    color: #ffffff !important;
}

[data-theme="dark"] ::ng-deep .mat-calendar-body-cell:not(.mat-calendar-body-disabled):hover > .mat-calendar-body-cell-content:not(.mat-calendar-body-selected) {
    background-color: rgba(255, 255, 255, 0.1) !important;
}

[data-theme="dark"] ::ng-deep .month-picker .mat-calendar-body-cell:hover > .mat-calendar-body-cell-content:not(.mat-calendar-body-selected) {
    background-color: rgba(255, 255, 255, 0.1) !important;
}

